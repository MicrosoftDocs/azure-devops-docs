---
title: Azure Function App task
description: This article explains how to use the Azure Function App task to deploy Azure Functions apps to Azure.
ms.topic: reference
ms.assetid: 2A56E8FD-07F1-43EF-AFB9-22B611DADC97
ms.author: atulmal
author: azooinmyluggage
ms.date: 5/2/2019
monikerRange: 'azure-devops'
---

# Azure Function App task

[!INCLUDE [include](../../includes/version-team-services.md)]

Use the Azure Function App task to deploy [functions](/azure/azure-functions/) to Azure. 

## Arguments

<table><thead><tr><th>Parameter</th><th>Description</th></tr></thead>
<tr><td><code>azureSubscription</code><br/>(Azure subscription)</td><td>(Required) Name of the <a href="../../library/connect-to-azure.md" data-raw-source="[Azure Resource Manager service connection](../../library/connect-to-azure.md)">Azure Resource Manager service connection</a>.</td></tr>
<tr><td><code>appType</code><br/>(App type)</td><td>(Required) Function app type.</td>
<tr><td><code>appName</code><br/>(App name)</td><td>(Required) Name of an existing app service.</td>
<tr><td><code>deployToSlotOrASE</code><br/>(Deploy to slot or App Service environment)</td><td>(Optional) Whether to deploy to an existing deployment slot or Azure App Service environment. For both targets, the task needs a resource group name. If the deployment target is a slot, the functions are deployed to the production slot by default. You can also provide any other existing slot name. If the deployment target is an App Service environment, specify the resource group name.<br/><br/>Default value: <code>false</code></td>
<tr><td><code>resourceGroupName</code><br/>(Resource group)</td><td>(Required if <code>deployToSlotOrASE</code> is <code>true</code>) Name of the resource group.</td>
<tr><td><code>slotName</code><br/>(Slot)</td><td>(Required if <code>deployToSlotOrASE</code> is <code>true</code>) Name of the slot.<br/><br/>Default value: <code>production</code></td>
<tr><td><code>package</code><br/>(Package or folder)</td><td>(Required) File path of the package or of a folder that contains App Service content generated by MSBuild or a compressed .zip or .war file. <br/><br/>Variables (<a href="/vsts/pipelines/build/variables" data-raw-source="[Build](/vsts/pipelines/build/variables)">Build</a> | <a href="/vsts/pipelines/release/variables#default-variables" data-raw-source="[Release](/vsts/pipelines/release/variables#default-variables)">Release</a>) and wildcards are supported. For example, $(System.DefaultWorkingDirectory)/<strong>/*.zip or $(System.DefaultWorkingDirectory)/</strong>/*.war.</td>
<tr><td><code>runtimeStack</code><br/>(Runtime stack)</td><td>(Optional) Web App on Linux provides two ways to publish an application: custom image deployment (Web App for Containers) and app deployment with a built-in platform image (Web App on Linux). You'll see this parameter only when you select <b>Linux Web App</b> as the app type in the task.</td>
<tr><td><code>startUpCommand</code><br/>(Startup command)</td><td>(Optional. Relevant if <code>appType</code> is <code>webAppLinux</code>.) Startup command to be run after deployment.</td>
<tr><td><code>customWebConfig</code><br/>(Generate web.config file parameters for Python, Node.js, Go, and Java apps)</td><td>(Optional) A standard web.config file will be generated and deployed to App Service if the application doesn't have one. You can edit the values in the web.config file. They'll vary depending on the application framework. For example, for a Node.js application, the web.config file will have startup file and iis_node module values. This edit feature is only for the generated web.config file. <a href="https://go.microsoft.com/fwlink/?linkid=843469" data-raw-source="[Learn more](https://go.microsoft.com/fwlink/?linkid=843469)">Learn more.</a>
<tr><td><code>appSettings</code><br/>(App settings)</td><td>(Optional) Application settings. Use the syntax <code>-key value</code>. Enclose values that contain spaces in double quotation marks. <br/><br/>For example, <code>-Port 5000 -RequestTimeout 5000 -WEBSITE_TIME_ZONE &quot;Eastern Standard Time&quot;</code>.</td>
<tr><td><code>configurationStrings</code><br/>(Configuration settings)</td><td>(Optional) Configuration strings. Use the syntax <code>-key value</code>. Enclose values that contain spaces in double quotation marks.<br/><br/>For example, <code>-phpVersion 5.6 -linuxFxVersion: node|6.11</code>.</td>
<tr><td><code>deploymentMethod</code><br/>(Deployment method)</td><td>(Required) <a href="#deployment-methods" data-raw-source="[Deployment method](#deployment-methods)">Deployment method</a> for the app.<br/><br/>Default value: <code>auto</code></td>
</table>

## Example

Here's a sample YAML snippet that deploys Azure functions on Windows: 
```YAML

variables:
  azureSubscription: Contoso
  # To ignore SSL error, uncomment the below variable
  # VSTS_ARM_REST_IGNORE_SSL_ERRORS: true

steps:
- task: AzureFunctionApp@1
  displayName: Azure Function App Deploy
  inputs:
    azureSubscription: $(azureSubscription)
    appName: samplefunctionapp
    package: $(System.DefaultWorkingDirectory)/**/*.zip
```
To deploy a function on Linux, add the `appType` parameter and set it to <code>appType: functionAppLinux</code>. If you don't specify a value,  <code>functionApp</code> is the default.

To explicitly specify the deployment method as Zip Deploy, add the parameter <code>deploymentMethod: zipDeploy</code>. Another supported value for this parameter is <code>runFromPackage</code>. 
If you don't specify a value, <code>auto</code> is the default.

For a walkthrough that shows how to create a CI/CD pipeline, see [Build and deploy Java to Azure Functions](../../ecosystems/java-function.md).

## Deployment methods

Several deployment methods are available in this task. The default value is `auto`. 

To change the deployment option in a designer task, expand **Additional Deployment Options** and enable **Select deployment method** to choose from other package-based deployment options.

Based on the type of Azure App Service and Azure Pipelines agent, the task uses a suitable deployment technology. The deployment technologies used by tasks are as follows:

* Kudu REST APIs

* Zip Deploy

* Run From Package

By default, the task attempts to select the appropriate deployment technology based on the input package, App Service type, and agent OS.

* If a post-deployment script is provided, use Zip Deploy. 
* If the App Service type is Web App on Linux, use Zip Deploy. 
* If a .war file is provided, use War Deploy. 
* If a .jar file is provided, use Run-From-Zip. 
* For all other tasks, use Run From Package (via Zip Deploy). 

On a non-Windows agent (for any App Service type), the task relies on the [Kudu REST API](https://github.com/projectkudu/kudu/wiki/REST-API) to deploy the web app.

### Kudu REST API 

The [Kudu REST API](https://github.com/projectkudu/kudu/wiki/REST-API) works on both Windows and Linux automation agents when the target is a Web App on Windows, a Web App on Linux (built-in source), or a function app. The task uses Kudu to copy files to the Azure App Service.

### Zip Deploy

Zip Deploy creates a .zip deployment package from the chosen package or folder. It then deploys the file contents to the wwwroot folder of the App Service name function app in Azure. This option overwrites all existing content in the wwwroot folder. For more information, see [Zip deployment for Azure Functions](/azure/azure-functions/deployment-zip-push).

### Run From Package

Run From Package creates the same deployment package as Zip Deploy. Instead of deploying files to the wwwroot folder, the Functions runtime mounts the entire package. When you use this option, files in the wwwroot folder become read-only. For more information, see [Run your Azure Functions from a package file](/azure/azure-functions/run-functions-from-deployment-package).

## Troubleshooting

[!INCLUDE [rm-app-service-troubleshoot-shared](./includes/rm-app-service-troubleshoot-shared.md)]

[!INCLUDE [rm-webapp-functionapp-troubleshoot-shared.md](./includes/rm-webapp-functionapp-troubleshoot-shared.md)]

### Function app deployment on Windows succeeds but the app doesn't work

This problem could occur if a web.config file isn't present in your app. You can either add a web.config file to your source or automatically generate one by using the **Application and Configuration Settings** of the task.

1. Select the task and go to **Generate web.config parameters for Python, Node.js, Go and Java apps**:

   :::image type="content" source="media/azure-rm-function-app-01.png" alt-text="Screenshot that shows the Generate web.config parameters section.":::


1. Select the More button (...) under **Generate web.config parameters for Python, Node.js, Go and Java apps** to edit the parameters:

   :::image type="content" source="media/azure-rm-web-app-deployment-02.png" alt-text="Screenshot that shows the Generate web.config parameters.":::

1. Select your application type in the **Application framework** list.
1. Select **OK**. Doing so will populate the web.config parameters required to generate the web.config file.

## FAQs

[!INCLUDE [rm-app-service-FAQs-shared](./includes/rm-app-service-faqs-shared.md)]

### I can't deploy to an internal App Service environment by using an Azure Resource Manager service connection and a Microsoft-hosted agent

By design, a Microsoft-hosted agent won't work with an App Service environment. Instead, you need to configure a private agent on a virtual machine that's in the same virtual network as the App Service environment. Also, set a private DNS zone to enable communication between the resources.

## Open source

This task is open source [on GitHub](https://github.com/Microsoft/azure-pipelines-tasks). Feedback and contributions are welcome.
